* MRSI ROI selection
This will ideally provide a graphical interface to guide placing coordinates and extracting MR spectrum.

* Porting From Matlab

** Read/Write isn't lossless?

After IFFT, matlab code saves to ~kspace.1.1~.
Reading this file back in and comparing to itself we can see lossy-ness around 10^{-3}. The figure max color is 10^{-5}.

   #+BEGIN_SRC python :session :export both :file imgs/lossy-kspace.png
     import matplotlib.pyplot as plt
     from siarray import SIArray
     # calc data
     SI = SIArray('test/data/siarray.1.1')
     SI.IFFTData()
     # read stored (matlab fwrite)
     with open('test/data/matlab/kspace.1.1', 'r') as f:
	 kspace = np.fromfile(f, '<4f')

     reread = kspace.reshape(24**2, 1024*2).T 
     orig = SI.kspace.reshape(24**2, 1024*2).T
     # see difference
     plt.imshow(abs(orig - reread))
     plt.clim([0,10**-5])
     plt.savefig('imgs/lossy-kspace.png', bbox_inches='tight')
   #+END_SRC

   #+RESULTS:
   [[file:imgs/lossy-kspace.png]]

** Comparing python and matlab
   ~test/genrate_mat.m~ runs through the spectrum pipeline and saves out matfiles to test the python code against.
   #+BEGIN_SRC bash
  python -m pytest
   #+END_SRC
  
   Example data from
#+BEGIN_SRC bash
find /Volumes/Hera/Projects/7TBrainMech/subjs/11743_20190802/slice_PFC/MRSI_roi/ -maxdepth 2 -iname 'rorig.nii' -or -iname 'mprage_middle.mat' -or -iname 'siarray.1.1' |
 xargs -I{} cp {} test/data/
#+END_SRC
